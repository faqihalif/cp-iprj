import{R as C,j as m,r as a,t as z}from"./app-6a7676a5.js";import{c as G,f as J,b as Q,e as W,a as T}from"./react-icons.esm-60f529c7.js";import{u as h,S as O}from"./button-5812d7e9.js";import{P as L}from"./index-9d6022b7.js";function X(e){const o=e+"CollectionProvider",[c,r]=G(o),[w,v]=c(o,{collectionRef:{current:null},itemMap:new Map}),b=f=>{const{scope:t,children:u}=f,d=C.useRef(null),n=C.useRef(new Map).current;return m.jsx(w,{scope:t,itemMap:n,collectionRef:d,children:u})};b.displayName=o;const g=e+"CollectionSlot",p=C.forwardRef((f,t)=>{const{scope:u,children:d}=f,n=v(g,u),s=h(t,n.collectionRef);return m.jsx(O,{ref:s,children:d})});p.displayName=g;const i=e+"CollectionItemSlot",S="data-radix-collection-item",E=C.forwardRef((f,t)=>{const{scope:u,children:d,...n}=f,s=C.useRef(null),F=h(t,s),x=v(i,u);return C.useEffect(()=>(x.itemMap.set(s,{ref:s,...n}),()=>void x.itemMap.delete(s))),m.jsx(O,{[S]:"",ref:F,children:d})});E.displayName=i;function I(f){const t=v(e+"CollectionConsumer",f);return C.useCallback(()=>{const d=t.collectionRef.current;if(!d)return[];const n=Array.from(d.querySelectorAll(`[${S}]`));return Array.from(t.itemMap.values()).sort((x,A)=>n.indexOf(x.ref.current)-n.indexOf(A.ref.current))},[t.collectionRef,t.itemMap])}return[{Provider:b,Slot:p,ItemSlot:E},I,r]}var Z=a.createContext(void 0);function ee(e){const o=a.useContext(Z);return e||o||"ltr"}var te=z["useId".toString()]||(()=>{}),oe=0;function re(e){const[o,c]=a.useState(te());return J(()=>{e||c(r=>r??String(oe++))},[e]),e||(o?`radix-${o}`:"")}var M="rovingFocusGroup.onEntryFocus",ne={bubbles:!1,cancelable:!0},_="RovingFocusGroup",[N,j,se]=X(_),[ce,be]=G(_,[se]),[ae,ue]=ce(_),K=a.forwardRef((e,o)=>m.jsx(N.Provider,{scope:e.__scopeRovingFocusGroup,children:m.jsx(N.Slot,{scope:e.__scopeRovingFocusGroup,children:m.jsx(ie,{...e,ref:o})})}));K.displayName=_;var ie=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:c,orientation:r,loop:w=!1,dir:v,currentTabStopId:b,defaultCurrentTabStopId:g,onCurrentTabStopIdChange:p,onEntryFocus:i,preventScrollOnEntryFocus:S=!1,...E}=e,I=a.useRef(null),f=h(o,I),t=ee(v),[u=null,d]=Q({prop:b,defaultProp:g,onChange:p}),[n,s]=a.useState(!1),F=W(i),x=j(c),A=a.useRef(!1),[V,P]=a.useState(0);return a.useEffect(()=>{const l=I.current;if(l)return l.addEventListener(M,F),()=>l.removeEventListener(M,F)},[F]),m.jsx(ae,{scope:c,orientation:r,dir:t,loop:w,currentTabStopId:u,onItemFocus:a.useCallback(l=>d(l),[d]),onItemShiftTab:a.useCallback(()=>s(!0),[]),onFocusableItemAdd:a.useCallback(()=>P(l=>l+1),[]),onFocusableItemRemove:a.useCallback(()=>P(l=>l-1),[]),children:m.jsx(L.div,{tabIndex:n||V===0?-1:0,"data-orientation":r,...E,ref:f,style:{outline:"none",...e.style},onMouseDown:T(e.onMouseDown,()=>{A.current=!0}),onFocus:T(e.onFocus,l=>{const Y=!A.current;if(l.target===l.currentTarget&&Y&&!n){const D=new CustomEvent(M,ne);if(l.currentTarget.dispatchEvent(D),!D.defaultPrevented){const y=x().filter(R=>R.focusable),H=y.find(R=>R.active),$=y.find(R=>R.id===u),q=[H,$,...y].filter(Boolean).map(R=>R.ref.current);B(q,S)}}A.current=!1}),onBlur:T(e.onBlur,()=>s(!1))})})}),k="RovingFocusGroupItem",U=a.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:c,focusable:r=!0,active:w=!1,tabStopId:v,...b}=e,g=re(),p=v||g,i=ue(k,c),S=i.currentTabStopId===p,E=j(c),{onFocusableItemAdd:I,onFocusableItemRemove:f}=i;return a.useEffect(()=>{if(r)return I(),()=>f()},[r,I,f]),m.jsx(N.ItemSlot,{scope:c,id:p,focusable:r,active:w,children:m.jsx(L.span,{tabIndex:S?0:-1,"data-orientation":i.orientation,...b,ref:o,onMouseDown:T(e.onMouseDown,t=>{r?i.onItemFocus(p):t.preventDefault()}),onFocus:T(e.onFocus,()=>i.onItemFocus(p)),onKeyDown:T(e.onKeyDown,t=>{if(t.key==="Tab"&&t.shiftKey){i.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const u=de(t,i.orientation,i.dir);if(u!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||t.shiftKey)return;t.preventDefault();let n=E().filter(s=>s.focusable).map(s=>s.ref.current);if(u==="last")n.reverse();else if(u==="prev"||u==="next"){u==="prev"&&n.reverse();const s=n.indexOf(t.currentTarget);n=i.loop?me(n,s+1):n.slice(s+1)}setTimeout(()=>B(n))}})})})});U.displayName=k;var le={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fe(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function de(e,o,c){const r=fe(e.key,c);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return le[r]}function B(e,o=!1){const c=document.activeElement;for(const r of e)if(r===c||(r.focus({preventScroll:o}),document.activeElement!==c))return}function me(e,o){return e.map((c,r)=>e[(o+r)%e.length])}var ge=K,Se=U;export{Se as I,ge as R,X as a,re as b,be as c,ee as u};
